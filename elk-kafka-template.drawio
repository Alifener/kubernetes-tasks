<mxfile host="app.diagrams.net" modified="2026-01-28T00:00:00.000Z" agent="GPT" version="22.1.0">
  <diagram id="elkKafkaTemplate" name="ELK + Kafka (eu-west-2, 3 AZ)">
    <mxGraphModel dx="1420" dy="820" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- REGION -->
        <mxCell id="region" value="AWS Region: eu-west-2 (London)" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="20" y="20" width="1560" height="940" as="geometry"/>
        </mxCell>

        <!-- VPC -->
        <mxCell id="vpc" value="VPC (3 AZs / 3 Private Subnets shown)" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#ffffff;strokeColor=#4a86e8;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="70" width="1500" height="860" as="geometry"/>
        </mxCell>

        <!-- AZ CONTAINERS -->
        <mxCell id="azA" value="AZ-a" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="80" y="120" width="470" height="780" as="geometry"/>
        </mxCell>
        <mxCell id="azB" value="AZ-b" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="565" y="120" width="470" height="780" as="geometry"/>
        </mxCell>
        <mxCell id="azC" value="AZ-c" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1050" y="120" width="470" height="780" as="geometry"/>
        </mxCell>

        <!-- SUBNETS (one per AZ, private) -->
        <mxCell id="subA" value="Private Subnet (eu-west-2a)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#999999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="160" width="430" height="720" as="geometry"/>
        </mxCell>
        <mxCell id="subB" value="Private Subnet (eu-west-2b)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#999999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="585" y="160" width="430" height="720" as="geometry"/>
        </mxCell>
        <mxCell id="subC" value="Private Subnet (eu-west-2c)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#999999;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1070" y="160" width="430" height="720" as="geometry"/>
        </mxCell>

        <!-- SECTION HEADERS -->
        <mxCell id="elkHdr" value="ELK Cluster" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#d9ead3;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="100" y="190" width="600" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="kafkaHdr" value="Kafka Cluster" style="rounded=1;whiteSpace=wrap;html=1;fontStyle=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="900" y="190" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- ELK NODES (AZ-a) -->
        <mxCell id="masterA" value="Master (1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="120" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="dataA" value="Data (1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="270" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ingestA" value="Ingest (1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="420" y="250" width="100" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="filebeatA" value="Filebeat Consumers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce5cd;strokeColor=#b45f06;" vertex="1" parent="1">
          <mxGeometry x="120" y="330" width="200" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="kibana" value="Kibana (UI)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="340" y="330" width="180" height="50" as="geometry"/>
        </mxCell>

        <!-- ELK NODES (AZ-b) -->
        <mxCell id="masterB" value="Master (2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="605" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="dataB" value="Data (2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="755" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ingestB" value="Ingest (2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="905" y="250" width="100" height="50" as="geometry"/>
        </mxCell>

        <!-- ELK NODES (AZ-c) -->
        <mxCell id="masterC" value="Master (3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="1090" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="dataC" value="Data (3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="1240" y="250" width="130" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="ingestC" value="Ingest (3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0d9;strokeColor=#38761d;" vertex="1" parent="1">
          <mxGeometry x="1390" y="250" width="100" height="50" as="geometry"/>
        </mxCell>

        <!-- KAFKA (Controllers + Brokers across AZs) -->
        <mxCell id="ctrlA" value="Kafka Controller (1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1090" y="330" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="brokerA" value="Kafka Broker (1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1290" y="330" width="160" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="ctrlB" value="Kafka Controller (2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1090" y="400" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="brokerB" value="Kafka Broker (2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1290" y="400" width="160" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="ctrlC" value="Kafka Controller (3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1090" y="470" width="180" height="50" as="geometry"/>
        </mxCell>
        <mxCell id="brokerC" value="Kafka Broker (3)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d0e0e3;strokeColor=#134f5c;" vertex="1" parent="1">
          <mxGeometry x="1290" y="470" width="160" height="50" as="geometry"/>
        </mxCell>

        <!-- FLOWS / CONNECTORS -->
        <!-- Filebeat -> Brokers -->
        <mxCell id="e_fb_to_brokers" value="beats/logs" style="endArrow=block;html=1;rounded=0;strokeWidth=2;" edge="1" parent="1" source="filebeatA" target="brokerA">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Brokers -> Ingest -->
        <mxCell id="e_broker_to_ingest" value="consume topics" style="endArrow=block;html=1;rounded=0;strokeWidth=2;" edge="1" parent="1" source="brokerA" target="ingestB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Ingest -> Data -->
        <mxCell id="e_ingest_to_data" value="index/write" style="endArrow=block;html=1;rounded=0;strokeWidth=2;" edge="1" parent="1" source="ingestB" target="dataB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Kibana -> Data -->
        <mxCell id="e_kibana_to_data" value="query/visualize" style="endArrow=block;html=1;rounded=0;strokeWidth=2;" edge="1" parent="1" source="kibana" target="dataB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Masters <-> Data (coordination) -->
        <mxCell id="e_master_to_data" value="cluster state" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="masterA" target="dataA">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_masterB_to_dataB" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="masterB" target="dataB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_masterC_to_dataC" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="masterC" target="dataC">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Kafka Controllers -> Brokers (metadata/coordination) -->
        <mxCell id="e_ctrl_to_broker" value="metadata" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="ctrlA" target="brokerA">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ctrlB_to_brokerB" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="ctrlB" target="brokerB">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="e_ctrlC_to_brokerC" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=2;dashed=1;" edge="1" parent="1" source="ctrlC" target="brokerC">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- FOOTNOTE / LEGEND -->
        <mxCell id="legend" value="Legend&#10;• Solid arrows = data flow&#10;• Dashed arrows = coordination/metadata&#10;Tip: Replace rectangles with AWS icons if desired (EC2, VPC, Subnet, etc.)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="760" width="600" height="120" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>

